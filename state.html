<!DOCTYPE html>
<html>
<head>
	<title>Component State!</title>
	<script type="text/javascript" src="./js/react.js"></script>
	<script type="text/javascript" src="./js/react-dom.js"></script>
	<script type="text/javascript" src="./js/browser.min.js"></script>
</head>
<body>
	<div id="container"></div>
	<script type="text/babel">
		var destination = document.querySelector("#container");

		var LightningCounter = React.createClass({
			getInitialState:function(){
				return{
					strikes:0
				};
			},

			timerTick:function(){
				this.setState({
					strikes:this.state.strikes + 100
				});
			},

			componentDidMount:function(){
				setInterval(this.timerTick, 1000);
			},

			render: function(){
				var counterStyle = {
					color:"#66FFFF",
					fontSize:50
				}
				var count = this.state.strikes.toLocaleString();
				return(
					<h1 style={counterStyle}>{count}</h1>
				);
			}
		});


		var LightningCounterDisplay = React.createClass({
			render:function(){
				var commonStyle = {
					margin:0,
					padding:0
				};
				var divStyle = {
					width:250,
					textAlign:"center",
					backgroundColor:"black",
					padding:40,
					fontFamily:"sans-serif",
					borderRadius:10,
					color:"#999"
				};
				var textStyle = {
					emphasis:{
						fontSize:38,
						...commonStyle
					},
					smallEmpasis:{
						...commonStyle
					},
					small:{
						fontSize:17,
						opacity:0.5,
						...commonStyle
					}
				}
				return(
					<div style={divStyle}>
						<LightningCounter/>
						<h2 style={textStyle.smallEmpasis}>
							雷霆打击
						</h2>
						<h2 style={textStyle.empasis}>
							我们的地球
						</h2>
						<p style={textStyle.smallEmpasis}>(自从你家在这个组件之后)</p>
					</div>
				);
			}
		});

		ReactDOM.render(
			<div>
				<LightningCounterDisplay/>
			</div>,
			destination
		);

	</script>
</body>
</html>